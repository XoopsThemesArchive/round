var fileLoadingImage="http://tunalife.zxq.net/online/images/loading.gif";var fileBottomNavCloseImage="http://tunalife.zxq.net/online/images/closelabel.gif";var overlayOpacity=0.6;var animate=true;var resizeSpeed=4;var borderSize=10;var imageArray=new Array;var activeImage;if(animate==true){overlayDuration=0.2;if(resizeSpeed>10){resizeSpeed=10;}if(resizeSpeed<1){resizeSpeed=1;}resizeDuration=(11-resizeSpeed)*0.15;}else{overlayDuration=0;resizeDuration=0;}Object.extend(Element,{getWidth:function(_1){_1=$(_1);return _1.offsetWidth;},setWidth:function(_2,w){_2=$(_2);_2.style.width=w+"px";},setHeight:function(_4,h){_4=$(_4);_4.style.height=h+"px";},setTop:function(_6,t){_6=$(_6);_6.style.top=t+"px";},setLeft:function(_8,l){_8=$(_8);_8.style.left=l+"px";},setSrc:function(_a,_b){_a=$(_a);_a.src=_b;},setHref:function(_c,_d){_c=$(_c);_c.href=_d;},setInnerHTML:function(_e,_f){_e=$(_e);_e.innerHTML=_f;}});Array.prototype.removeDuplicates=function(){for(i=0;i<this.length;i++){for(j=this.length-1;j>i;j--){if(this[i][0]==this[j][0]){this.splice(j,1);}}}};Array.prototype.empty=function(){for(i=0;i<=this.length;i++){this.shift();}};var Lightbox=Class.create();Lightbox.prototype={initialize:function(){this.updateImageList();var _10=document.getElementsByTagName("body").item(0);var _11=document.createElement("div");_11.setAttribute("id","overlay");_11.style.display="none";_11.onclick=function(){myLightbox.end();};_10.appendChild(_11);var _12=document.createElement("div");_12.setAttribute("id","lightbox");_12.style.display="none";_12.onclick=function(e){if(!e){var e=window.event;}var _15=Event.element(e).id;if(_15=="lightbox"){myLightbox.end();}};_10.appendChild(_12);var _16=document.createElement("div");_16.setAttribute("id","outerImageContainer");_12.appendChild(_16);if(animate){Element.setWidth("outerImageContainer",250);Element.setHeight("outerImageContainer",250);}else{Element.setWidth("outerImageContainer",1);Element.setHeight("outerImageContainer",1);}var _17=document.createElement("div");_17.setAttribute("id","imageContainer");_16.appendChild(_17);var _18=document.createElement("img");_18.setAttribute("id","lightboxImage");_17.appendChild(_18);var _19=document.createElement("div");_19.setAttribute("id","hoverNav");_17.appendChild(_19);var _1a=document.createElement("a");_1a.setAttribute("id","prevLink");_1a.setAttribute("href","#");_19.appendChild(_1a);var _1b=document.createElement("a");_1b.setAttribute("id","nextLink");_1b.setAttribute("href","#");_19.appendChild(_1b);var _1c=document.createElement("div");_1c.setAttribute("id","loading");_17.appendChild(_1c);var _1d=document.createElement("a");_1d.setAttribute("id","loadingLink");_1d.setAttribute("href","#");_1d.onclick=function(){myLightbox.end();return false;};_1c.appendChild(_1d);var _1e=document.createElement("img");_1e.setAttribute("src",fileLoadingImage);_1d.appendChild(_1e);var _1f=document.createElement("div");_1f.setAttribute("id","imageDataContainer");_12.appendChild(_1f);var _20=document.createElement("div");_20.setAttribute("id","imageData");_1f.appendChild(_20);var _21=document.createElement("div");_21.setAttribute("id","imageDetails");_20.appendChild(_21);var _22=document.createElement("span");_22.setAttribute("id","caption");_21.appendChild(_22);var _23=document.createElement("span");_23.setAttribute("id","numberDisplay");_21.appendChild(_23);var _24=document.createElement("div");_24.setAttribute("id","bottomNav");_20.appendChild(_24);var _25=document.createElement("a");_25.setAttribute("id","bottomNavClose");_25.setAttribute("href","#");_25.onclick=function(){myLightbox.end();return false;};_24.appendChild(_25);var _26=document.createElement("img");_26.setAttribute("src",fileBottomNavCloseImage);_25.appendChild(_26);},updateImageList:function(){if(!document.getElementsByTagName){return;}var _27=document.getElementsByTagName("a");var _28=document.getElementsByTagName("area");for(var i=0;i<_27.length;i++){var _2a=_27[i];var _2b=String(_2a.getAttribute("rel"));if(_2a.getAttribute("href")&&(_2b.toLowerCase().match("lightbox"))){_2a.onclick=function(){myLightbox.start(this);return false;};}}for(var i=0;i<_28.length;i++){var _2d=_28[i];var _2e=String(_2d.getAttribute("rel"));if(_2d.getAttribute("href")&&(_2e.toLowerCase().match("lightbox"))){_2d.onclick=function(){myLightbox.start(this);return false;};}}},start:function(_2f){hideSelectBoxes();hideFlash();var _30=getPageSize();Element.setWidth("overlay",_30[0]);Element.setHeight("overlay",_30[1]);new Effect.Appear("overlay",{duration:overlayDuration,from:0,to:overlayOpacity});imageArray=[];imageNum=0;if(!document.getElementsByTagName){return;}var _31=document.getElementsByTagName(_2f.tagName);if((_2f.getAttribute("rel")=="lightbox")){imageArray.push(new Array(_2f.getAttribute("href"),_2f.getAttribute("title")));}else{for(var i=0;i<_31.length;i++){var _33=_31[i];if(_33.getAttribute("href")&&(_33.getAttribute("rel")==_2f.getAttribute("rel"))){imageArray.push(new Array(_33.getAttribute("href"),_33.getAttribute("title")));}}imageArray.removeDuplicates();while(imageArray[imageNum][0]!=_2f.getAttribute("href")){imageNum++;}}var _34=getPageScroll();var _35=_34[1]+(_30[3]/10);var _36=_34[0];Element.setTop("lightbox",_35);Element.setLeft("lightbox",_36);Element.show("lightbox");this.changeImage(imageNum);},changeImage:function(_37){activeImage=_37;if(animate){Element.show("loading");}Element.hide("lightboxImage");Element.hide("hoverNav");Element.hide("prevLink");Element.hide("nextLink");Element.hide("imageDataContainer");Element.hide("numberDisplay");imgPreloader=new Image();imgPreloader.onload=function(){Element.setSrc("lightboxImage",imageArray[activeImage][0]);myLightbox.resizeImageContainer(imgPreloader.width,imgPreloader.height);imgPreloader.onload=function(){};};imgPreloader.src=imageArray[activeImage][0];},resizeImageContainer:function(_38,_39){this.widthCurrent=Element.getWidth("outerImageContainer");this.heightCurrent=Element.getHeight("outerImageContainer");var _3a=(_38+(borderSize*2));var _3b=(_39+(borderSize*2));this.xScale=(_3a/this.widthCurrent)*100;this.yScale=(_3b/this.heightCurrent)*100;wDiff=this.widthCurrent-_3a;hDiff=this.heightCurrent-_3b;if(!(hDiff==0)){new Effect.Scale("outerImageContainer",this.yScale,{scaleX:false,duration:resizeDuration,queue:"front"});}if(!(wDiff==0)){new Effect.Scale("outerImageContainer",this.xScale,{scaleY:false,delay:resizeDuration,duration:resizeDuration});}if((hDiff==0)&&(wDiff==0)){if(navigator.appVersion.indexOf("MSIE")!=-1){pause(250);}else{pause(100);}}Element.setHeight("prevLink",_39);Element.setHeight("nextLink",_39);Element.setWidth("imageDataContainer",_3a);this.showImage();},showImage:function(){Element.hide("loading");new Effect.Appear("lightboxImage",{duration:resizeDuration,queue:"end",afterFinish:function(){myLightbox.updateDetails();}});this.preloadNeighborImages();},updateDetails:function(){if(imageArray[activeImage][1]){Element.show("caption");Element.setInnerHTML("caption",imageArray[activeImage][1]);}if(imageArray.length>1){Element.show("numberDisplay");Element.setInnerHTML("numberDisplay","Image "+eval(activeImage+1)+" of "+imageArray.length);}new Effect.Parallel([new Effect.SlideDown("imageDataContainer",{sync:true,duration:resizeDuration,from:0,to:1}),new Effect.Appear("imageDataContainer",{sync:true,duration:resizeDuration})],{duration:resizeDuration,afterFinish:function(){var _3c=getPageSize();Element.setHeight("overlay",_3c[1]);myLightbox.updateNav();}});},updateNav:function(){Element.show("hoverNav");if(activeImage!=0){Element.show("prevLink");document.getElementById("prevLink").onclick=function(){myLightbox.changeImage(activeImage-1);return false;};}if(activeImage!=(imageArray.length-1)){Element.show("nextLink");document.getElementById("nextLink").onclick=function(){myLightbox.changeImage(activeImage+1);return false;};}this.enableKeyboardNav();},enableKeyboardNav:function(){document.onkeydown=this.keyboardAction;},disableKeyboardNav:function(){document.onkeydown="";},keyboardAction:function(e){if(e==null){keycode=event.keyCode;escapeKey=27;}else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE;}key=String.fromCharCode(keycode).toLowerCase();if((key=="x")||(key=="o")||(key=="c")||(keycode==escapeKey)){myLightbox.end();}else{if((key=="p")||(keycode==37)){if(activeImage!=0){myLightbox.disableKeyboardNav();myLightbox.changeImage(activeImage-1);}}else{if((key=="n")||(keycode==39)){if(activeImage!=(imageArray.length-1)){myLightbox.disableKeyboardNav();myLightbox.changeImage(activeImage+1);}}}}},preloadNeighborImages:function(){if((imageArray.length-1)>activeImage){preloadNextImage=new Image();preloadNextImage.src=imageArray[activeImage+1][0];}if(activeImage>0){preloadPrevImage=new Image();preloadPrevImage.src=imageArray[activeImage-1][0];}},end:function(){this.disableKeyboardNav();Element.hide("lightbox");new Effect.Fade("overlay",{duration:overlayDuration});showSelectBoxes();showFlash();}};function getPageScroll(){var _3e,yScroll;if(self.pageYOffset){yScroll=self.pageYOffset;_3e=self.pageXOffset;}else{if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;_3e=document.documentElement.scrollLeft;}else{if(document.body){yScroll=document.body.scrollTop;_3e=document.body.scrollLeft;}}}arrayPageScroll=new Array(_3e,yScroll);return arrayPageScroll;}function getPageSize(){var _3f,yScroll;if(window.innerHeight&&window.scrollMaxY){_3f=window.innerWidth+window.scrollMaxX;yScroll=window.innerHeight+window.scrollMaxY;}else{if(document.body.scrollHeight>document.body.offsetHeight){_3f=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else{_3f=document.body.offsetWidth;yScroll=document.body.offsetHeight;}}var _40,windowHeight;if(self.innerHeight){if(document.documentElement.clientWidth){_40=document.documentElement.clientWidth;}else{_40=self.innerWidth;}windowHeight=self.innerHeight;}else{if(document.documentElement&&document.documentElement.clientHeight){_40=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else{if(document.body){_40=document.body.clientWidth;windowHeight=document.body.clientHeight;}}}if(yScroll<windowHeight){pageHeight=windowHeight;}else{pageHeight=yScroll;}if(_3f<_40){pageWidth=_3f;}else{pageWidth=_40;}arrayPageSize=new Array(pageWidth,pageHeight,_40,windowHeight);return arrayPageSize;}function getKey(e){if(e==null){keycode=event.keyCode;}else{keycode=e.which;}key=String.fromCharCode(keycode).toLowerCase();if(key=="x"){}}function listenKey(){document.onkeypress=getKey;}function showSelectBoxes(){var _42=document.getElementsByTagName("select");for(i=0;i!=_42.length;i++){_42[i].style.visibility="visible";}}function hideSelectBoxes(){var _43=document.getElementsByTagName("select");for(i=0;i!=_43.length;i++){_43[i].style.visibility="hidden";}}function showFlash(){var _44=document.getElementsByTagName("object");for(i=0;i<_44.length;i++){_44[i].style.visibility="visible";}var _45=document.getElementsByTagName("embed");for(i=0;i<_45.length;i++){_45[i].style.visibility="visible";}}function hideFlash(){var _46=document.getElementsByTagName("object");for(i=0;i<_46.length;i++){_46[i].style.visibility="hidden";}var _47=document.getElementsByTagName("embed");for(i=0;i<_47.length;i++){_47[i].style.visibility="hidden";}}function pause(ms){var _49=new Date();curDate=null;do{var _4a=new Date();}while(_4a-_49<ms);}function initLightbox(){myLightbox=new Lightbox();}Event.observe(window,"load",initLightbox,false);